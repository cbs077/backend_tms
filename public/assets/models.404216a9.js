var X=Object.defineProperty;var x=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var z=(e,o,r)=>o in e?X(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,G=(e,o)=>{for(var r in o||(o={}))Z.call(o,r)&&z(e,r,o[r]);if(x)for(var r of x(o))ee.call(o,r)&&z(e,r,o[r]);return e};import{d as T,j as P,l as B,m as I,e as c,o as k,b as N,w as E,a as t,f as s,t as w,K as j,c as q,F as Y,k as oe}from"./vendor.9d37dd73.js";import{l as te}from"./lodash.c8ee468d.js";import{u as O,w as ae}from"./xlsx.4af27ae8.js";import{B as K,_ as R}from"./index.d29c9db7.js";import{T as le}from"./table-common-button.f5560c2d.js";import{C as ne}from"./confirm.modal.91109671.js";import{B as H}from"./base-modal.2684ffef.js";import{a as se}from"./filter.030cb9fd.js";import{u as ue}from"./devices.hooks.91a6deab.js";const de=T({components:{BaseModal:H,BaseButton:K},props:{modelValue:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue","click:positiveA"],setup(e,{emit:o}){const r=P({get:()=>e.modelValue,set:m=>{o("update:modelValue",m)}}),_=[{key:"deviceNumber",value:"\uB2E8\uB9D0\uAE30 \uBC88\uD638"},{key:"status",value:"\uC0C1\uD0DC"}];function h(m){var n=new Date(m),u=""+(n.getMonth()+1),C=""+n.getDate(),D=n.getFullYear();return u.length<2&&(u="0"+u),C.length<2&&(C="0"+C),[D,u,C].join("-")}let l=B({CAT_MODEL_ID:"",CAT_MODEL_NM:"",DESCRIPTION:"",REG_DT:h(new Date),REG_USER:window.localStorage.getItem("userNm"),isExistId:""});const g=m=>{if(console.log("changeForm.isExistId",l.isExistId),l.isExistId=="true"||l.isExistId==""){alert("\uBAA8\uB378 \uCF54\uB4DC \uC911\uBCF5\uAC12\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");return}var n=window.localStorage.getItem("token"),u=window.localStorage.getItem("vanId"),C=window.localStorage.getItem("userNm");I.post("http://tms-test-server.p-e.kr:8081/terminal_mdl/?",{VAN_ID:u,CAT_MODEL_ID:l.CAT_MODEL_ID,CAT_MODEL_NM:l.CAT_MODEL_NM,DESCRIPTION:l.DESCRIPTION,USE_YN:"Y",REG_DT:new Date,REG_USER:C},{headers:{Authorization:n}}).then(D=>{D.data.list,o("click:positiveA")})},p=m=>{var n=window.localStorage.getItem("token"),u=window.localStorage.getItem("vanId");if(window.localStorage.getItem("userNm"),l.CAT_MODEL_ID==""){alert("\uBAA8\uB378\uCF54\uB4DC is null");return}if(l.CAT_MODEL_ID.length>4){alert("4\uC790\uB9AC \uC774\uC0C1\uC785\uB2C8\uB2E4.");return}I.get("http://tms-test-server.p-e.kr:8081/terminal_mdl/idcheck/"+u+"/"+l.CAT_MODEL_ID,{headers:{Authorization:n}}).then(C=>{var D=C.data.count;D>0?(alert("\uC774\uBBF8 \uB4F1\uB85D\uB41C \uBAA8\uB378 \uCF54\uB4DC \uC785\uB2C8\uB2E4."),l.isExistId="true"):(alert("\uB4F1\uB85D\uAC00\uB2A5\uD55C \uBAA8\uB378 \uCF54\uB4DC \uC785\uB2C8\uB2E4."),l.isExistId="false")})};return l.userNM=window.localStorage.getItem("userNm"),{header:_,isOpen:r,closeModal(){r.value=!1},onSave:g,changeForm:l,onIdCheck:p}}}),ie={class:"my-3 grid h-10 grid-cols-8"},re=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uBAA8\uB378 \uCF54\uB4DC ",-1),ce={class:"col-span-4 my-auto"},me={class:"col-span-2 my-auto text-center font-bold"},pe={class:"my-3 grid h-10 grid-cols-8"},_e=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uBAA8\uB378\uBA85 ",-1),Ce={class:"col-span-4 my-auto"},ve={class:"my-3 grid grid-cols-8"},ge=t("div",{class:"col-span-2 my-auto text-center font-bold"},"\uC124\uBA85",-1),De={class:"col-span-6 my-auto"},Be={class:"my-3 grid h-10 grid-cols-8"},he=t("div",{class:"col-span-2 my-auto text-center font-bold"},"\uB4F1\uB85D\uC77C",-1),Ae={class:"col-span-6 my-auto"},fe={class:"my-3 grid h-10 grid-cols-8"},be=t("div",{class:"col-span-2 my-auto text-center font-bold"},"\uB4F1\uB85D\uC790",-1),ye={class:"col-span-6 my-auto"},ke={class:"mt-12 text-center"};function Ee(e,o,r,_,h,l){const g=c("el-input"),p=c("base-button"),m=c("base-modal");return k(),N(m,{modelValue:e.isOpen,"onUpdate:modelValue":o[3]||(o[3]=n=>e.isOpen=n),class:"w-2/3",title:"\uB2E8\uB9D0\uAE30 \uBAA8\uB378 \uB4F1\uB85D"},{modalBody:E(()=>[t("div",null,[t("div",ie,[re,t("div",ce,[s(g,{modelValue:e.changeForm.CAT_MODEL_ID,"onUpdate:modelValue":o[0]||(o[0]=n=>e.changeForm.CAT_MODEL_ID=n),maxlength:"4",csize:"large"},null,8,["modelValue"])]),t("div",me,[s(p,{onClick:e.onIdCheck,text:"\uC911\uBCF5\uD655\uC778",class:"mr-1"},null,8,["onClick"])])]),t("div",pe,[_e,t("div",Ce,[s(g,{modelValue:e.changeForm.CAT_MODEL_NM,"onUpdate:modelValue":o[1]||(o[1]=n=>e.changeForm.CAT_MODEL_NM=n),size:"large"},null,8,["modelValue"])])]),t("div",ve,[ge,t("div",De,[s(g,{modelValue:e.changeForm.DESCRIPTION,"onUpdate:modelValue":o[2]||(o[2]=n=>e.changeForm.DESCRIPTION=n),size:"large",type:"textarea",rows:"5"},null,8,["modelValue"])])]),t("div",Be,[he,t("div",Ae,w(e.changeForm.REG_DT),1)]),t("div",fe,[be,t("div",ye,w(e.changeForm.REG_USER),1)])]),t("div",ke,[s(p,{class:"mr-4 border-sk-gray bg-sk-gray text-white",text:"\uC218\uC815 \uBC0F \uC800\uC7A5",type:"button",onClick:e.onSave},null,8,["onClick"])])]),_:1},8,["modelValue"])}var we=R(de,[["render",Ee]]);const Ie=T({components:{BaseModal:H},props:{modelValue:{type:Boolean,required:!1,default:!0},device:{type:Object,required:!0,default:()=>{}}},emits:["update:modelValue","click:positive","click:negative"],setup(e,{emit:o}){const r=P({get:()=>e.modelValue,set:p=>{Object.assign(l,h),o("update:modelValue",p)}}),_=[{key:"deviceNumber",value:"\uB2E8\uB9D0\uAE30 \uBC88\uD638"},{key:"status",value:"\uC0C1\uD0DC"}];let h=B({CAT_MODEL_NM:"",description:"",regDt:se(new Date)});const l=B(G({},h));return{header:_,isOpen:r,closeModal(){r.value=!1},changeForm:l,onSave:p=>{var m=window.localStorage.getItem("token"),n=window.localStorage.getItem("vanId");window.localStorage.getItem("userNm"),I.put("http://tms-test-server.p-e.kr:8081/terminal_mdl/?",{VAN_ID:n,CAT_MODEL_ID:e.device.modelCode,CAT_MODEL_NM:l.CAT_MODEL_NM,DESCRIPTION:l.description,REG_DT:new Date},{headers:{Authorization:m}}).then(u=>{u.data.list,o("click:positive")})}}}}),Ve={class:"my-3 grid h-10 grid-cols-8"},Me=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uB2E8\uB9D0\uAE30 \uBAA8\uB378 ID ",-1),Fe={class:"col-span-6 my-auto"},Se={class:"my-3 grid h-10 grid-cols-8"},$e=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uB2E8\uB9D0\uAE30 \uBAA8\uB378\uBA85 ",-1),Oe={class:"col-span-6 my-auto"},Te={class:"my-3 grid grid-cols-8"},Ne=t("div",{class:"col-span-2 my-auto text-center font-bold"},"\uC124\uBA85",-1),Re={class:"col-span-6 my-auto"},Ue={class:"my-3 grid h-10 grid-cols-8"},Le=t("div",{class:"col-span-2 my-auto text-center font-bold"},"\uB4F1\uB85D\uC77C",-1),xe={class:"col-span-6 my-auto"},ze={class:"my-3 grid h-10 grid-cols-8"},Ge=t("div",{class:"col-span-2 my-auto text-center font-bold"},"\uB4F1\uB85D\uC790",-1),je={class:"col-span-6 my-auto"},qe={class:"mt-12 text-center"};function Ye(e,o,r,_,h,l){const g=c("el-input"),p=c("base-button"),m=c("base-modal");return k(),N(m,{modelValue:e.isOpen,"onUpdate:modelValue":o[2]||(o[2]=n=>e.isOpen=n),class:"w-2/3",title:"\uB2E8\uB9D0\uAE30 \uBAA8\uB378 \uC2E0\uADDC \uB4F1\uB85D","no-action":""},{modalBody:E(()=>[t("div",null,[t("div",Ve,[Me,t("div",Fe,w(e.device.modelCode),1)]),t("div",Se,[$e,t("div",Oe,[s(g,{modelValue:e.changeForm.CAT_MODEL_NM,"onUpdate:modelValue":o[0]||(o[0]=n=>e.changeForm.CAT_MODEL_NM=n),size:"large"},null,8,["modelValue"])])]),t("div",Te,[Ne,t("div",Re,[s(g,{size:"large",modelValue:e.changeForm.description,"onUpdate:modelValue":o[1]||(o[1]=n=>e.changeForm.description=n),type:"textarea",rows:"5"},null,8,["modelValue"])])]),t("div",Ue,[Le,t("div",xe,w(e.changeForm.regDt),1)]),t("div",ze,[Ge,t("div",je,w(e.device.regUser),1)])]),t("div",qe,[s(p,{class:"mr-4 border-sk-gray bg-sk-gray text-white",text:"\uC218\uC815 \uBC0F \uC800\uC7A5",type:"button",onClick:e.onSave},null,8,["onClick"])])]),_:1},8,["modelValue"])}var Pe=R(Ie,[["render",Ye]]);const Ke=T({name:"DeviceUnRegistrations",components:{TableCommonButton:le,ConfirmModal:ne,ModelDetailModal:Pe,ModelCreateModal:we,BaseButton:K},setup(){let{registrationHeaders:e,devices:o,renmeObjectKey:r}=ue();const _=j(""),h=B({all:!1,modelCode:!1,swGroupCode:!1,swVersion:!1,status:!0,registrationDate:!0,lastAccessDate:!0}),l=j(),g=B({modal:!1,text:"\uC120\uD0DD\uD55C \uD56D\uBAA9\uC744 \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"}),p=B({modal:!1}),m=B({modal:!1}),n=d=>{p.data=d,p.modal=!0};B({slectData:[]});let u=B({page:1,pageCount:10,total:10}),C=B({swGroupCodes:[{value:"-"}],deviceModels:[],swVersions:[{value:"-"}],data:[]}),D="";const M=d=>{u.page=d;var a="page="+u.page+"&page_count="+u.pageCount;_.value!=""?a=a+"&cat_model_nm="+_.value:l.value!=""&&(a=a+"&cat_model_id="+l.value),i(a).then(v=>{A(v)})},f=d=>{console.log("onTake",d),u.pageCount=d;var a="page="+u.page+"&page_count="+u.pageCount;_.value!=""?a=a+"&cat_model_nm="+_.value:l.value!=""&&(a=a+"&cat_model_id="+l.value),i(a).then(v=>{A(v)})},F=d=>{console.log("onSearch11",l);var a="page="+u.page+"&page_count="+u.pageCount;_.value!=""?a=a+"&cat_model_id="+_.value:a=a+"&cat_model_id="+l.value,console.log("param",a),D=a,i(a).then(v=>{A(v)})},S=d=>{console.log("reset"),l.value="",_.value=""},$=d=>{u.total=d};function A(d){var a=d.list,v=[];for(var b of a){var V=r(b);v.push(V)}$(d.total_count),C.data=v}function y(){var d=window.localStorage.getItem("token"),a=window.localStorage.getItem("vanId"),v="van_id="+a;d==null&&(d=""),I.get("http://tms-test-server.p-e.kr:8081/terminal_mdl?"+v,{headers:{Authorization:d}}).then(b=>{var V=b.data.list;C.deviceModels=te.exports.map(V,function(L){return{key:L.CAT_MODEL_ID,value:L.CAT_MODEL_NM}}),C.deviceModels.unshift({key:"",value:"\uC804\uCCB4"})})}async function i(b){var a=window.localStorage.getItem("token"),v=window.localStorage.getItem("vanId"),b=b+"&van_id="+v;return a==null&&(a=""),await I.get("http://tms-test-server.p-e.kr:8081/terminal_mdl/list?"+b,{headers:{Authorization:a}}).then(U=>U.data)}const W=()=>{i("page=1&page_count=1000"+D).then(d=>{var a=O.json_to_sheet(d.list),v=O.book_new();O.book_append_sheet(v,a,"nameData"),ae(v,"terminalmdl.xlsx")})};function J(d){m.modal=!1,m.data={},y(),i("page=1&page_count=20").then(a=>{A(a)})}const Q=d=>{console.log("onSaveDetail"),p.modal=!1,y(),i("page=1&page_count=20").then(a=>{A(a)})};return y(),i("page=1&page_count=20").then(d=>{A(d)}),{modelCreate:m,onRowClicked:n,selectOption:l,modelDetail:p,deviceUnRegistration:g,query:_,headers:e,devices:o,displayOptions:h,pageVal:u,changeForm:C,onSearch:F,onReset:S,excelValue:D,onSaveExcel:W,paginate:M,onTake:f,onSave:J,onSaveDetail:Q}}}),He={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},We={class:"my-3 flex flex-row"},Je=t("div",{class:"my-auto w-1/12"},"\uBAA8\uB378\uBA85",-1),Qe={class:"my-auto ml-5 w-5/12"},Xe=t("div",{class:"my-auto w-1/12 text-center"},"\uAC80\uC0C9\uC5B4",-1),Ze={class:"w-80 w-5/12"},eo=t("div",{class:"grow"},null,-1),oo={class:"rounded border border-sk-gray"},to={class:"flex justify-center"};function ao(e,o,r,_,h,l){const g=c("bread-crumb"),p=c("el-option"),m=c("el-select"),n=c("el-input"),u=c("options-search-button"),C=c("excel-button"),D=c("base-button"),M=c("table-common-button"),f=c("el-table-column"),F=c("el-table"),S=c("el-pagination"),$=c("confirm-modal"),A=c("model-detail-modal"),y=c("model-create-modal");return k(),q(Y,null,[s(g,{text:"\uB2E8\uB9D0\uAE30 \uBAA8\uB378 \uC870\uD68C"}),t("div",He,[t("div",We,[Je,t("div",Qe,[s(m,{modelValue:e.selectOption,"onUpdate:modelValue":o[0]||(o[0]=i=>e.selectOption=i),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:E(()=>[(k(!0),q(Y,null,oe(e.changeForm.deviceModels,i=>(k(),N(p,{key:i.value,label:i.value,value:i.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),Xe,t("div",Ze,[s(n,{modelValue:e.query,"onUpdate:modelValue":o[1]||(o[1]=i=>e.query=i),size:"large"},null,8,["modelValue"])])]),s(u,{"onClick:search":e.onSearch,"onClick:reset":e.onReset},null,8,["onClick:search","onClick:reset"])]),s(M,{"onUpdate:take":e.onTake},{body:E(()=>[eo,s(C,{"onClick:excel":e.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"]),s(D,{text:"\uB2E8\uB9D0\uAE30 \uBAA8\uB378 \uB4F1\uB85D",class:"ml-1 w-36",onClick:o[2]||(o[2]=i=>e.modelCreate.modal=!0)})]),_:1},8,["onUpdate:take"]),t("div",oo,[s(F,{data:e.changeForm.data,fit:"",class:"rounded",onRowClick:e.onRowClicked},{default:E(()=>[s(f,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),s(f,{prop:"modelCode",label:"\uBAA8\uB378\uCF54\uB4DC",align:"center"}),s(f,{prop:"modelName",label:"\uBAA8\uB378\uBA85",align:"center"}),s(f,{prop:"description",label:"\uC124\uBA85",align:"center"}),s(f,{prop:"applicationDate",label:"\uB4F1\uB85D\uC77C",align:"center"})]),_:1},8,["data","onRowClick"])]),t("div",to,[s(S,{onCurrentChange:e.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":e.pageVal.total},null,8,["onCurrentChange","page-count"])]),s($,{modelValue:e.deviceUnRegistration.modal,"onUpdate:modelValue":o[3]||(o[3]=i=>e.deviceUnRegistration.modal=i),title:"Confirm","positive-text":"\uC0AD\uC81C","negative-text":"\uCDE8\uC18C",text:e.deviceUnRegistration.text},null,8,["modelValue","text"]),s(A,{modelValue:e.modelDetail.modal,"onUpdate:modelValue":o[4]||(o[4]=i=>e.modelDetail.modal=i),device:e.modelDetail.data,"onClick:positive":e.onSaveDetail},null,8,["modelValue","device","onClick:positive"]),s(y,{"onClick:positiveA":e.onSave,modelValue:e.modelCreate.modal,"onUpdate:modelValue":o[5]||(o[5]=i=>e.modelCreate.modal=i)},null,8,["onClick:positiveA","modelValue"])],64)}var Co=R(Ke,[["render",ao]]);export{Co as default};
