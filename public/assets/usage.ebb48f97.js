import{d as $,j as O,e as r,o as T,b as j,w as b,f as t,a,l as A,K as z,c as G,F as K,m as S}from"./vendor.9d37dd73.js";import{l as L}from"./lodash.c8ee468d.js";import{u as E,w as W}from"./xlsx.4af27ae8.js";import{B as R,_ as U,u as H}from"./index.d29c9db7.js";import{T as F}from"./table-common-button.f5560c2d.js";import{B as J}from"./base-modal.2684ffef.js";import{u as P}from"./devices.hooks.91a6deab.js";import"./filter.030cb9fd.js";const Q=$({components:{BaseModal:J,TableCommonButton:F,BaseButton:R},props:{modelValue:{type:Boolean,required:!1,default:!0},items:{type:Array,required:!0,default:()=>[{request:"\uC5C5\uB370\uC774\uD2B8",deviceNumber:"111",requestDate:new Date,responseCode:"\uC2E4\uD328"}]}},emits:["update:modelValue"],setup(o,{emit:u}){const g=O({get:()=>o.modelValue,set:h=>{u("update:modelValue",h)}});return{header:[{key:"deviceNumber",value:"\uB2E8\uB9D0\uAE30 \uBC88\uD638"},{key:"status",value:"\uC0C1\uD0DC"}],isOpen:g,closeModal(){g.value=!1}}}}),X=a("div",{class:"grow"},null,-1),Y=a("div",{class:"mb-6 rounded"},[a("table",{class:"w-full border-collapse border border-sk-lightgray"},[a("tbody",null,[a("tr",null,[a("td",{class:"h-10 w-3/12 border border-sk-lightgray bg-sk-lightgray text-center"}," VAN\uC0AC\uBA85 "),a("td",{class:"border border-sk-lightgray text-center"},"TEST")]),a("tr",null,[a("td",{class:"h-10 w-3/12 border border-sk-lightgray bg-sk-lightgray text-center"}," \uB2E8\uB9D0\uAE30 \uBAA8\uB378 "),a("td",{class:"border border-sk-lightgray text-center"},"TEST")])])])],-1),Z={class:"rounded border border-sk-gray"};function ee(o,u,g,v,h,y){const _=r("excel-button"),C=r("table-common-button"),d=r("el-table-column"),B=r("base-button"),c=r("el-table"),l=r("base-modal");return T(),j(l,{modelValue:o.isOpen,"onUpdate:modelValue":u[0]||(u[0]=i=>o.isOpen=i),class:"w-2/3",title:"\uB2E8\uB9D0\uAE30 \uC0AC\uC6A9\uC815\uBCF4 \uC0C1\uC138","no-action":"","no-exit-guard":""},{modalBody:b(()=>[t(C,{"no-take":""},{body:b(()=>[X,t(_,{class:"mr-1"})]),_:1}),Y,a("div",Z,[t(c,{data:o.items,fit:"",class:"rounded"},{default:b(()=>[t(d,{prop:"request",label:"\uC694\uCCAD\uB0B4\uC6A9",align:"center"}),t(d,{prop:"deviceNumber",label:"\uB2E8\uB9D0\uAE30\uBC88\uD638",align:"center"}),t(d,{prop:"requestDate",label:"\uC694\uCCAD\uC77C\uC2DC",align:"center"}),t(d,{prop:"update",label:"\uC5C5\uB370\uC774\uD2B8",align:"center"},{default:b(()=>[a("div",null,[t(B,{text:"\uAC15\uC81C \uC5C5\uB370\uC774\uD2B8"})])]),_:1}),t(d,{prop:"responseCode",label:"\uC751\uB2F5\uCF54\uB4DC",align:"center"})]),_:1},8,["data"])])]),_:1},8,["modelValue"])}var te=U(Q,[["render",ee]]);const ae=$({name:"DeviceRegistrationLogs",components:{TableCommonButton:F,DeviceUsageDetailModal:te,BaseButton:R},setup(){const{logHeaders:o,devices:u,update:g,renmeObjectKey:v}=P(),{deviceModels:h}=H(),y=A({start:new Date,end:new Date}),_=A({modal:!1}),C=n=>{_.modal=!0},d=n=>{l.page=n;var e="page="+l.page+"&page_count="+l.pageCount;e=e+"&"+selectOption.value+"="+c.value,k(e).then(s=>{D(s)})},B=n=>{l.pageCount=n;var e="page="+l.page+"&page_count="+l.pageCount;e=e+"&"+selectOption.value+"="+c.value,k(e).then(s=>{D(s)})},c=z("");let l=A({page:1,pageCount:10,total:10}),i=A({swGroupCodes:[{value:"-"}],deviceModels:[{value:"-"}],swVersions:[{value:"-"}],data:[]}),f="";const V=n=>{console.log();var e="page="+l.page+"&page_count="+l.pageCount;e=e+"&"+selectOption.value+"="+c.value,f=e,k(e).then(s=>{D(s)})},p=n=>{l.total=n};function D(n){var e=n.list,s=[];for(var m of e){var w=v(m);s.push(w)}p(n.total_count),i.data=s}function M(){var n=window.localStorage.getItem("token"),e=window.localStorage.getItem("vanId"),s="van_id="+e;n==null&&(n=""),S.get("http://tms-test-server.p-e.kr:8081/terminal/list?"+s,{headers:{Authorization:n}}).then(m=>{var w=m.data.list;i.deviceModels=L.exports.map(w,function(I){return{value:I.CAT_MODEL_NM}})})}async function k(m){var e=window.localStorage.getItem("token"),s=window.localStorage.getItem("vanId"),m=m+"&van_id="+s;return e==null&&(e=""),await S.get("http://tms-test-server.p-e.kr:8081/terminal/list?"+m,{headers:{Authorization:e}}).then(x=>x.data)}const N=()=>{k("page=1&page_count=1000"+f).then(n=>{var e=E.json_to_sheet(n.list),s=E.book_new();E.book_append_sheet(s,e,"nameData"),W(s,"swGroup.xlsx")})};function q(){swGroupCreate.modal=!1,swGroupCreate.data={}}return M(),k("page=1&page_count=20").then(n=>{D(n)}),{deviceUsageDetail:_,onRowClicked:C,headers:o,selectDataRange:y,devices:u,deviceModels:h,query:c,pageVal:l,changeForm:i,onSearch:V,excelValue:f,onSaveExcel:N,paginate:d,onTake:B,update:g,renmeObjectKey:v,onSave:q}}}),oe={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},ne={class:"my-3 flex flex-row"},le=a("div",{class:"my-auto mr-6"},"\uC870\uD68C\uC77C",-1),se={class:"mr-12 flex"},re={class:"block"},ue=a("p",{class:"mx-2 translate-y-1 transition"},"~",-1),de={class:"block"},ce=a("div",{class:"grow"},null,-1),ie={class:"rounded border border-sk-gray"},pe={class:"flex justify-center"};function me(o,u,g,v,h,y){const _=r("bread-crumb"),C=r("el-date-picker"),d=r("options-search-button"),B=r("excel-button"),c=r("table-common-button"),l=r("el-table-column"),i=r("el-table"),f=r("el-pagination"),V=r("device-usage-detail-modal");return T(),G(K,null,[t(_,{text:"\uB2E8\uB9D0\uAE30 \uC0AC\uC6A9\uC815\uBCF4 \uC870\uD68C"}),a("div",oe,[a("div",ne,[le,a("div",se,[a("div",re,[t(C,{modelValue:o.selectDataRange.start,"onUpdate:modelValue":u[0]||(u[0]=p=>o.selectDataRange.start=p),size:"large"},null,8,["modelValue"])]),ue,a("div",de,[t(C,{modelValue:o.selectDataRange.end,"onUpdate:modelValue":u[1]||(u[1]=p=>o.selectDataRange.end=p),size:"large"},null,8,["modelValue"])])])]),t(d,{"onClick:search":o.onSearch},null,8,["onClick:search"])]),t(c,{"onUpdate:take":o.onTake},{body:b(()=>[ce,t(B,{"onClick:excel":o.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"])]),_:1},8,["onUpdate:take"]),a("div",ie,[t(i,{data:o.changeForm.data,fit:"",class:"rounded",onRowClick:o.onRowClicked},{default:b(()=>[t(l,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),t(l,{prop:"modelName",label:"\uB2E8\uB9D0\uAE30 \uBAA8\uB378",align:"center"}),t(l,{prop:"deviceCount",label:"\uB2E8\uB9D0\uAE30 \uC218\uB7C9",align:"center"}),t(l,{prop:"swDownload",label:"S/W Download \uAC74\uC218",align:"center"})]),_:1},8,["data","onRowClick"])]),a("div",pe,[t(f,{onCurrentChange:o.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":o.pageVal.total},null,8,["onCurrentChange","page-count"])]),t(V,{modelValue:o.deviceUsageDetail.modal,"onUpdate:modelValue":u[2]||(u[2]=p=>o.deviceUsageDetail.modal=p)},null,8,["modelValue"])],64)}var ke=U(ae,[["render",me]]);export{ke as default};
