import{U as m}from"./index.e12753c8.js";import{d as R,K as O,l as g,e as s,o as B,c as S,f as t,a as c,w as x,F as T,k as Y,b as $,m as U}from"./vendor.9d37dd73.js";import{l as j}from"./lodash.c8ee468d.js";import{u as F,w as q}from"./xlsx.4af27ae8.js";import{_ as z,E as I}from"./index.d29c9db7.js";import{T as L}from"./table-common-button.f5560c2d.js";import{V as K}from"./van-detail.modal.8eb9c22e.js";import{a as G}from"./filter.030cb9fd.js";import{u as W}from"./devices.hooks.91a6deab.js";import"./base-modal.2684ffef.js";const H=R({name:"DeviceUnRegistrations",components:{TableCommonButton:L,ExcelButton:I,VanDetailModal:K},setup(){let{update:n,renmeObjectKey:i}=W();const p=O(),N=g({available:[{value:"test"}],select:void 0}),w=[{fax:"",address:m.lorem.word(),contact:m.lorem.word(),manager:m.lorem.word(),user:m.lorem.word(),van:m.lorem.word(),vanCode:m.lorem.word(),date:G(new Date)}],_=g({modal:!1,data:w}),k=e=>{_.data=e,_.modal=!0},C=g({data:w}),D=e=>{l.page=e;var a="page="+l.page+"&page_count="+l.pageCount;a=a+"&"+p.value+"="+query.value,v(a).then(o=>{d(o)})},V=e=>{l.pageCount=e;var a="page="+l.page+"&page_count="+l.pageCount;a=a+"&"+p.value+"="+query.value,v(a).then(o=>{d(o)})};let l=g({page:1,pageCount:10,total:10}),b=g({swGroupCodes:[{value:"-"}],deviceModels:[{value:""}],swVersions:[{value:"-"}]}),r="";const y=()=>{var e="page="+l.page+"&page_count="+l.pageCount;p.value!=""&&(e=e+"&van_id="+p.value),r=e,v(e).then(a=>{d(a)})},A=e=>{l.total=e};function d(e){var a=e.list,o=[];for(var f of a){var h=i(f);o.push(h)}A(e.total_count),C.data=o}function u(){var e=window.localStorage.getItem("token"),a;e==null&&(e=""),U.get("http://tms-test-server.p-e.kr:8081/van/list?"+a,{headers:{Authorization:e}}).then(o=>{var f=o.data.list;b.deviceModels=j.exports.map(f,function(M){return{key:M.VAN_ID,value:M.VAN_NM}})})}async function v(o){var a=window.localStorage.getItem("token"),o=o;return a==null&&(a=""),await U.get("http://tms-test-server.p-e.kr:8081/van/list?"+o,{headers:{Authorization:a}}).then(h=>h.data)}const E=()=>{v("page=1&page_count=1000"+r).then(e=>{var a=F.json_to_sheet(e.list),o=F.book_new();F.book_append_sheet(o,a,"nameData"),q(o,"terminalmdl.xlsx")})};return u(),v("page=1&page_count=20").then(e=>{d(e)}),{filter:N,vanDetail:_,onRowClicked:k,vanList:C,pageVal:l,changeForm:b,onSearch:y,excelValue:r,onSaveExcel:E,paginate:D,onTake:V,selectOption:p}}}),J={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},P={class:"my-3 flex flex-row"},Q=c("div",{class:"my-auto w-1/12"},"VAN\uC0AC",-1),X={class:"my-auto ml-5 w-4/12"},Z=c("div",{class:"grow"},null,-1),ee={class:"rounded border border-sk-gray"},ae={class:"flex justify-center"};function oe(n,i,p,N,w,_){const k=s("bread-crumb"),C=s("el-option"),D=s("el-select"),V=s("options-search-button"),l=s("excel-button"),b=s("table-common-button"),r=s("el-table-column"),y=s("el-table"),A=s("el-pagination"),d=s("van-detail-modal");return B(),S(T,null,[t(k,{text:"VAN\uC0AC \uAD00\uB9AC \uC870\uD68C"}),c("div",J,[c("div",P,[Q,c("div",X,[t(D,{modelValue:n.selectOption,"onUpdate:modelValue":i[0]||(i[0]=u=>n.selectOption=u),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:x(()=>[(B(!0),S(T,null,Y(n.changeForm.deviceModels,u=>(B(),$(C,{key:u.value,label:u.value,value:u.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),t(V,{"onClick:search":n.onSearch},null,8,["onClick:search"])]),t(b,null,{body:x(()=>[Z,t(l,{"onClick:excel":n.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"])]),_:1}),c("div",ee,[t(y,{data:n.vanList.data,fit:"",class:"rounded",onRowClick:n.onRowClicked},{default:x(()=>[t(r,{prop:"vanCode",label:"VAN\uC0AC \uCF54\uB4DC",align:"center"}),t(r,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),t(r,{prop:"address",label:"\uC8FC\uC18C",align:"center"}),t(r,{prop:"contact",label:"\uC804\uD654\uBC88\uD638",align:"center"}),t(r,{prop:"manager",label:"\uB2F4\uB2F9\uC790",align:"center"}),t(r,{prop:"regDt",label:"\uB4F1\uB85D\uC77C",align:"center"}),t(r,{prop:"regUser",label:"\uB4F1\uB85D\uC790",align:"center"})]),_:1},8,["data","onRowClick"])]),c("div",ae,[t(A,{onCurrentChange:n.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":n.pageVal.total},null,8,["onCurrentChange","page-count"])]),t(d,{modelValue:n.vanDetail.modal,"onUpdate:modelValue":i[1]||(i[1]=u=>n.vanDetail.modal=u),van:n.vanDetail.data},null,8,["modelValue","van"])],64)}var me=z(H,[["render",oe]]);export{me as default};
