import{d as R,K as U,l as b,e as u,o as V,c as E,f as a,a as o,w as O,F as z,k as $,b as j,m as T}from"./vendor.9d37dd73.js";import{l as W}from"./lodash.c8ee468d.js";import{u as x,w as q}from"./xlsx.4af27ae8.js";import{T as K}from"./table-common-button.f5560c2d.js";import{D as L}from"./device-update-detail.modal.6dbd9e41.js";import{_ as P,u as H}from"./index.d29c9db7.js";import{u as J}from"./devices.hooks.91a6deab.js";import"./base-modal.2684ffef.js";import"./filter.030cb9fd.js";const Q=R({name:"DeviceUnRegistrations",components:{TableCommonButton:K,DeviceUpdateDetailModal:L},setup(){let{registrationHeaders:s,devices:p,update:g,renmeObjectKey:w}=J();const{searchOptions:S}=H(),m=U(""),k=b({all:!1,modelCode:!1,swGroupCode:!1,swVersion:!1,status:!0,registrationDate:!0,lastAccessDate:!0}),i=U(),C=b({modal:!1}),D=t=>{C.modal=!0},h=t=>{l.page=t;var e="page="+l.page+"&page_count="+l.pageCount;e=e+"&"+i.value+"="+m.value,v(e).then(n=>{r(n)})},B=t=>{l.pageCount=t;var e="page="+l.page+"&page_count="+l.pageCount;e=e+"&"+i.value+"="+m.value,v(e).then(n=>{r(n)})};let l=b({page:1,pageCount:10,total:10}),c=b({swGroupCodes:[{value:"-"}],deviceModels:[{value:"-"}],swVersions:[{value:"-"}]}),_="";const y=t=>{console.log();var e="page="+l.page+"&page_count="+l.pageCount;e=e+"&"+i.value+"="+m.value,_=e,v(e).then(n=>{r(n)})},A=t=>{l.total=t};function r(t){var e=t.list,n=[];for(var d of e){var f=w(d);n.push(f)}A(t.total_count),g(n)}function F(){var t=window.localStorage.getItem("token"),e=window.localStorage.getItem("vanId"),n="van_id="+e;t==null&&(t=""),T.get("http://tms-test-server.p-e.kr:8081/terminal_mdl?"+n,{headers:{Authorization:t}}).then(d=>{var f=d.data.list;c.deviceModels=W.exports.map(f,function(G){return{value:G.CAT_MODEL_NM}})})}async function v(d){var e=window.localStorage.getItem("token"),n=window.localStorage.getItem("vanId"),d=d+"&van_id="+n;return e==null&&(e=""),await T.get("http://tms-test-server.p-e.kr:8081/swoprmg/up/list?"+d,{headers:{Authorization:e}}).then(I=>I.data)}const M=()=>{v("page=1&page_count=1000"+_).then(t=>{var e=x.json_to_sheet(t.list),n=x.book_new();x.book_append_sheet(n,e,"nameData"),q(n,"swOperation.xlsx")})};function N(){swCreate.modal=!1,swCreate.data={}}return F(),v("page=1&page_count=20").then(t=>{r(t)}),{onRowClicked:D,deviceUpdateDetail:C,selectOption:i,update:g,query:m,headers:s,devices:p,searchOptions:S,displayOptions:k,query:m,pageVal:l,changeForm:c,onSearch:y,excelValue:_,onSaveExcel:M,onSave:N,paginate:h,onTake:B,update:g,renmeObjectKey:w}}}),X={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},Y={class:"my-3"},Z={class:"my-3 flex"},ee=o("div",{class:"my-auto w-1/12"},"Update \uC77C",-1),te={class:"flex w-4/12"},ae={class:"block"},oe=o("p",{class:"mx-auto grow translate-y-1 text-center transition"},"~",-1),ne={class:"block"},se={class:"my-3 flex"},le=o("div",{class:"my-auto w-1/12"},"\uAC80\uC0C9\uC870\uAC74",-1),re={class:"flex w-4/12"},ue=o("div",{class:"my-auto w-1/12 text-center"},"\uAC80\uC0C9\uC5B4",-1),ce={class:"flex w-4/12"},ie={class:"my-3 flex"},de=o("div",{class:"my-auto w-1/12"},"\uB2E8\uB9D0\uAE30 \uBC88\uD638",-1),pe={class:"flex w-4/12"},me={class:"rounded border border-sk-gray"},_e={class:"flex justify-center"};function ve(s,p,g,w,S,m){const k=u("bread-crumb"),i=u("el-date-picker"),C=u("el-option"),D=u("el-select"),h=u("el-input"),B=u("options-search-button"),l=u("table-common-button"),c=u("el-table-column"),_=u("el-table"),y=u("el-pagination"),A=u("device-update-detail-modal");return V(),E(z,null,[a(k,{text:"\uB2E8\uB9D0\uAE30 Update \uC774\uB825"}),o("div",X,[o("div",Y,[o("div",Z,[ee,o("div",te,[o("div",ae,[a(i,{size:"large"})]),oe,o("div",ne,[a(i,{size:"large"})])])]),o("div",se,[le,o("div",re,[a(D,{modelValue:s.selectOption,"onUpdate:modelValue":p[0]||(p[0]=r=>s.selectOption=r),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:O(()=>[(V(!0),E(z,null,$(s.searchOptions,r=>(V(),j(C,{key:r.value,label:r.value,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),ue,o("div",ce,[a(h,{size:"large",placeholder:"Please Input"})])]),o("div",ie,[de,o("div",pe,[a(h,{size:"large",placeholder:"Please Input"})])])]),a(B,{"onClick:search":s.onSearch},null,8,["onClick:search"])]),a(l),o("div",me,[a(_,{data:s.devices,fit:"",class:"rounded",onRowClick:s.onRowClicked},{default:O(()=>[a(c,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),a(c,{prop:"swGroupNm",label:"S/W Group\uBA85",align:"center"}),a(c,{prop:"swVersion",label:"S/W Version",align:"center"}),a(c,{prop:"deviceNumber",label:"\uB2E8\uB9D0\uAE30\uBC88\uD638",align:"center"}),a(c,{prop:"swGroupCode",label:"\uC694\uCCAD\uB0B4\uC6A9",align:"center"}),a(c,{prop:"regDt",label:"\uC694\uCCAD\uC77C\uC2DC",align:"center"}),a(c,{prop:"status",label:"\uC751\uB2F5\uCF54\uB4DC",align:"center"})]),_:1},8,["data","onRowClick"])]),o("div",_e,[a(y,{onCurrentChange:s.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":s.pageVal.total},null,8,["onCurrentChange","page-count"])]),a(A,{modelValue:s.deviceUpdateDetail.modal,"onUpdate:modelValue":p[1]||(p[1]=r=>s.deviceUpdateDetail.modal=r)},null,8,["modelValue"])],64)}var ye=P(Q,[["render",ve]]);export{ye as default};
