var Q=Object.defineProperty;var G=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var j=(e,a,s)=>a in e?Q(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,q=(e,a)=>{for(var s in a||(a={}))X.call(a,s)&&j(e,s,a[s]);if(G)for(var s of G(a))Y.call(a,s)&&j(e,s,a[s]);return e};import{d as Z,a7 as ee,K as W,l as f,e as r,o as d,c as R,f as p,a as u,w as B,F as O,k as K,b as g,z as v,m as L,A as te}from"./vendor.9d37dd73.js";import{u as T,w as oe}from"./xlsx.4af27ae8.js";import{l as ae}from"./lodash.c8ee468d.js";import{_ as ne,B as le,u as se}from"./index.d29c9db7.js";import{T as re}from"./table-common-button.f5560c2d.js";import{C as ue}from"./confirm.modal.91109671.js";import{u as ce}from"./devices.hooks.91a6deab.js";import"./base-modal.2684ffef.js";import"./filter.030cb9fd.js";const ie=Z({name:"DeviceUnRegistrations",components:{BaseButton:le,TableCommonButton:re,TrashIcon:ee,ConfirmModal:ue},setup(){let{registrationHeaders_a:e,devices:a,update:s,renmeObjectKey:F}=ce();const{searchOptions:$}=se(),h=W(""),S=f({all:!1,modelCode:!1,swGroupCode:!1,swVersion:!1,status:!0,registrationDate:!0,lastAccessDate:!0}),b=W(),y=f({modal:!1,text:"\uC120\uD0DD\uD55C \uD56D\uBAA9\uC744 \uC0AD\uC81C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"});let w=f({van:!0,modelCode:!1,deviceNumber:!1,swGroupCode:!0,swVersion:!1,status:!0,applicationDate:!0,lastAccessDate:!0,checkAll:[]});const c=f(q({},w));let A="",i=f({page:1,pageCount:10,total:10}),k=f({checkbox:1});const I=t=>{console.log("reset"),b.value="",h.value="",U(),Object.assign(c,w)},m=t=>{console.log("onSearch",b);var o="page="+i.page+"&page_count="+i.pageCount;o=o+"&"+b.value+"="+h.value,A=o,C(o).then(l=>{D(l)})},E=t=>{i.page=t;var o="page="+i.page+"&page_count="+i.pageCount;o=o+"&"+b.value+"="+h.value,C(o).then(l=>{D(l)})},H=t=>{i.pageCount=t;var o="page="+i.page+"&page_count="+i.pageCount;o=o+"&"+b.value+"="+h.value,C(o).then(l=>{D(l)})},N=t=>{i.total=t},n=(t,o)=>{c[t]=o};async function C(_){var o=window.localStorage.getItem("vanId"),l=window.localStorage.getItem("token"),_=_+"&van_id="+o;return l==null&&(l=""),await L.get("http://tms-test-server.p-e.kr:8081/terminal/list?"+_,{headers:{Authorization:l}}).then(x=>x.data)}async function z(t){var o=window.localStorage.getItem("vanId"),l=window.localStorage.getItem("token");return l==null&&(l=""),await L.delete("http://tms-test-server.p-e.kr:8081/terminal?",{data:{VAN_ID:o,CAT_SERIAL_NO:t},headers:{Authorization:l}}).then(V=>(C("page=1&page_count=20").then(x=>{D(x),U()}),V.data))}const M=()=>{C("page=1&page_count=1000"+A).then(t=>{var o=T.json_to_sheet(t.list),l=T.book_new();T.book_append_sheet(l,o,"nameData"),oe(l,"terminal.xlsx")})};function D(t){var o=t.list,l=[];for(var _ of o){var V=F(_);l.push(V)}N(t.total_count),s(l)}function U(){c.checkAll.modelCode=!1,c.checkAll.deviceNumber=!1,c.checkAll.swGroupCode=!0,c.checkAll.swVersion=!1,c.checkAll.status=!0,c.checkAll.applicationDate=!0,c.checkAll.lastAccessDate=!0}function J(){k.checkbox.forEach(function(t,o){z(t),console.log("array index: "+o+" value : "+t)}),y.modal=!1,console.log("onDeleteItems")}function P(t){console.log("onSelectChange",t),k.checkbox=ae.exports.map(t,"deviceNumber"),console.log("onSelectChange",k.checkbox)}return C("page=1&page_count=20").then(t=>{D(t),U()}),{selectOption:b,update:s,deviceUnRegistration:y,query:h,headers:e,devices:a,searchOptions:$,displayOptions:S,onSearch:m,tableHeader:c,paginate:E,onTake:H,onCheckbox:n,onSaveExcel:M,pageVal:i,excelValue:A,onDeleteItems:J,delTerminal:z,data:k,onReset:I,onSelectChange:P}}}),de={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},pe={class:"my-3 flex flex-row"},me=u("div",{class:"my-auto w-1/12"},"\uAC80\uC0C9\uC870\uAC74",-1),Ce={class:"my-auto w-5/12 pr-5"},ge=u("div",{class:"my-auto w-1/12 text-center"},"\uAC80\uC0C9\uC5B4",-1),be={class:"w-80 w-5/12"},ve={class:"my-6 flex flex-row"},he=u("div",{class:"my-auto mr-6 block w-1/12 align-middle"},"\uACB0\uACFC \uB370\uC774\uD130",-1),ke={class:"w-11/12"},_e={class:"flex justify-center"},fe=te(" \uC0AD\uC81C "),Ae=u("div",{class:"grow"},null,-1),De={class:"rounded border border-sk-gray"},ye={class:"flex justify-center"};function we(e,a,s,F,$,h){const S=r("bread-crumb"),b=r("el-option"),y=r("el-select"),w=r("el-input"),c=r("el-checkbox"),A=r("options-search-button"),i=r("trash-icon"),k=r("base-button"),I=r("table-common-button"),m=r("el-table-column"),E=r("el-table"),H=r("el-pagination"),N=r("confirm-modal");return d(),R(O,null,[p(S,{text:"\uB2E8\uB9D0\uAE30 \uC0AD\uC81C"}),u("div",de,[u("div",pe,[me,u("div",Ce,[p(y,{modelValue:e.selectOption,"onUpdate:modelValue":a[0]||(a[0]=n=>e.selectOption=n),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:B(()=>[(d(!0),R(O,null,K(e.searchOptions,n=>(d(),g(b,{key:n.value,label:n.value,value:n.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),ge,u("div",be,[p(w,{modelValue:e.query,"onUpdate:modelValue":a[1]||(a[1]=n=>e.query=n),size:"large"},null,8,["modelValue"])])]),u("div",ve,[he,u("div",ke,[(d(!0),R(O,null,K(e.headers,n=>(d(),g(c,{modelValue:e.tableHeader.checkAll[n.key],"onUpdate:modelValue":C=>e.tableHeader.checkAll[n.key]=C,key:`filter-${n.key}`,label:n.value,onChange:C=>e.onCheckbox(n.key,e.tableHeader.checkAll[n.key]),size:"large"},null,8,["modelValue","onUpdate:modelValue","label","onChange"]))),128))])]),p(A,{"onClick:search":e.onSearch,"onClick:reset":e.onReset},null,8,["onClick:search","onClick:reset"])]),p(I,null,{body:B(()=>[p(k,{class:"ml-1",onClick:a[2]||(a[2]=n=>e.deviceUnRegistration.modal=!0)},{"button-body":B(()=>[u("div",_e,[p(i,{class:"mr-3 w-5"}),fe])]),_:1}),Ae]),_:1}),u("div",De,[p(E,{data:e.devices,fit:"",class:"rounded",onSelectionChange:e.onSelectChange},{default:B(()=>[p(m,{modelValue:e.data.checkbox,"onUpdate:modelValue":a[3]||(a[3]=n=>e.data.checkbox=n),type:"selection","primary-text":"",class:"text-black"},null,8,["modelValue"]),p(m,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),e.tableHeader.modelCode==!0?(d(),g(m,{key:0,prop:"modelCode",label:"\uB2E8\uB9D0\uAE30\uBAA8\uB378\uCF54\uB4DC",align:"center"})):v("",!0),e.tableHeader.deviceNumber==!0?(d(),g(m,{key:1,prop:"deviceNumber",label:"\uB2E8\uB9D0\uAE30\uBC88\uD638",align:"center"})):v("",!0),e.tableHeader.swGroupCode==!0?(d(),g(m,{key:2,prop:"swGroupCode",label:"S/W Group \uCF54\uB4DC",align:"center"})):v("",!0),e.tableHeader.swVersion==!0?(d(),g(m,{key:3,prop:"swVersion",label:"S/W Version",align:"center"})):v("",!0),e.tableHeader.status==!0?(d(),g(m,{key:4,prop:"status",label:"\uC0C1\uD0DC",align:"center"})):v("",!0),e.tableHeader.applicationDate==!0?(d(),g(m,{key:5,prop:"applicationDate",label:"\uB4F1\uB85D\uC77C",align:"center"})):v("",!0),e.tableHeader.lastAccessDate==!0?(d(),g(m,{key:6,prop:"lastAccessDate",label:"\uCD5C\uC885\uC811\uC18D\uC77C",align:"center"})):v("",!0)]),_:1},8,["data","onSelectionChange"])]),u("div",ye,[p(H,{onCurrentChange:e.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":e.pageVal.total},null,8,["onCurrentChange","page-count"])]),p(N,{modelValue:e.deviceUnRegistration.modal,"onUpdate:modelValue":a[4]||(a[4]=n=>e.deviceUnRegistration.modal=n),title:"Confirm","positive-text":"\uC0AD\uC81C","negative-text":"\uCDE8\uC18C","onClick:positive":e.onDeleteItems,text:e.deviceUnRegistration.text},null,8,["modelValue","onClick:positive","text"])],64)}var Oe=ne(ie,[["render",we]]);export{Oe as default};
