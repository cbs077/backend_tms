import{d as z,I as L,J as N,K as x,l as b,L as $,e as r,o as B,c as E,f as t,a as c,w as A,F as M,k as j,b as K,m as R}from"./vendor.9d37dd73.js";import{l as H}from"./lodash.c8ee468d.js";import{u as I,w as J}from"./xlsx.4af27ae8.js";import{T as P}from"./table-common-button.f5560c2d.js";import{S as Q}from"./sw-upgrade-detail.modal.03b2b507.js";import{u as X}from"./devices.hooks.91a6deab.js";import{_ as Y}from"./index.d29c9db7.js";import"./base-modal.2684ffef.js";import"./filter.030cb9fd.js";const Z=z({name:"DeviceRegistrations",components:{TableCommonButton:P,ElTableColumn:L,ElTable:N,SwUpgradeDetailModal:Q},setup(){const{registrationHeaders:a,devices:i,update:f,renmeObjectKey:h}=X(),T=[{id:1,key:"sw_group_id",value:"S/W Group \uCF54\uB4DC"},{id:2,key:"sw_version",value:"S/W Version"}],m=x(),C=b({modal:!1}),g=b({modal:!1}),k=o=>{C.modal=!0},y=o=>{s.page=o;var e="page="+s.page+"&page_count="+s.pageCount;e=e+"&"+m.value+"="+p.value,_(e).then(n=>{l(n)})},S=o=>{s.pageCount=o;var e="page="+s.page+"&page_count="+s.pageCount;e=e+"&"+m.value+"="+p.value,_(e).then(n=>{l(n)})},p=x("");let s=b({page:1,pageCount:10,total:10}),u=b({swGroupCodes:[{value:"-"}],deviceModels:[{value:"-"}],swVersions:[{value:"-"}]}),v="";const V=o=>{console.log();var e="page="+s.page+"&page_count="+s.pageCount;e=e+"&"+m.value+"="+p.value,v=e,_(e).then(n=>{l(n)})},D=o=>{s.total=o};function l(o){var e=o.list,n=[];for(var d of e){var w=h(d);n.push(w)}D(o.total_count),f(n)}function U(){var o=window.localStorage.getItem("token"),e=window.localStorage.getItem("vanId"),n="van_id="+e;o==null&&(o=""),R.get("http://tms-test-server.p-e.kr:8081/terminal_mdl?"+n,{headers:{Authorization:o}}).then(d=>{var w=d.data.list;u.deviceModels=H.exports.map(w,function(O){return{key:O.CAT_MODEL_ID,value:O.CAT_MODEL_NM}})})}async function _(d){var e=window.localStorage.getItem("token"),n=window.localStorage.getItem("vanId"),d=d+"&van_id="+n;return e==null&&(e=""),await R.get("http://tms-test-server.p-e.kr:8081/swoprmg/up/list?"+d,{headers:{Authorization:e}}).then(F=>F.data)}const W=()=>{_("page=1&page_count=1000"+v).then(o=>{var e=I.json_to_sheet(o.list),n=I.book_new();I.book_append_sheet(n,e,"nameData"),J(n,"swOperation.xlsx")})};function G(){g.modal=!1,g.data={}}const q=o=>{console.log("reset"),m.value="",p.value=""};return U(),_("page=1&page_count=20").then(o=>{l(o)}),{selectOption:m,onRowClicked:k,swCreate:g,swDetail:C,headers:a,devices:i,searchOptions:T,Search:$,query:p,pageVal:s,changeForm:u,onSearch:V,excelValue:v,onSaveExcel:W,onSave:G,paginate:y,onTake:S,update:f,renmeObjectKey:h,onReset:q}}}),ee={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},oe={class:"my-3 flex flex-row"},ae=c("div",{class:"my-auto mr-6 w-1/12"},"\uAC80\uC0C9\uC870\uAC74",-1),te={class:"my-auto w-5/12 pr-5"},ne=c("div",{class:"my-auto mr-6 w-1/12 text-center"},"\uAC80\uC0C9\uC5B4",-1),le={class:"w-5/12 pr-5"},se=c("div",{class:"grow"},null,-1),re={class:"rounded border border-sk-gray"},ue={class:"flex justify-center"};function ce(a,i,f,h,T,m){const C=r("bread-crumb"),g=r("el-option"),k=r("el-select"),y=r("el-input"),S=r("options-search-button"),p=r("excel-button"),s=r("table-common-button"),u=r("el-table-column"),v=r("el-table"),V=r("el-pagination"),D=r("sw-upgrade-detail-modal");return B(),E(M,null,[t(C,{text:"S/W Upgrade \uC774\uB825"}),c("div",ee,[c("div",oe,[ae,c("div",te,[t(k,{modelValue:a.selectOption,"onUpdate:modelValue":i[0]||(i[0]=l=>a.selectOption=l),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:A(()=>[(B(!0),E(M,null,j(a.searchOptions,l=>(B(),K(g,{key:l.value,label:l.value,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),ne,c("div",le,[t(y,{modelValue:a.query,"onUpdate:modelValue":i[1]||(i[1]=l=>a.query=l),size:"large",placeholder:"Please Input","suffix-icon":a.Search},null,8,["modelValue","suffix-icon"])])]),t(S,{"onClick:search":a.onSearch,"onClick:reset":a.onReset},null,8,["onClick:search","onClick:reset"])]),t(s,null,{body:A(()=>[se,t(p,{"onClick:excel":a.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"])]),_:1}),c("div",re,[t(v,{data:a.devices,fit:"",class:"rounded",onRowClick:a.onRowClicked},{default:A(()=>[t(u,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),t(u,{prop:"swGroupCode",label:"S/W Group \uCF54\uB4DC",align:"center"}),t(u,{prop:"swVersion",label:"S/W Group \uBA85",align:"center"}),t(u,{prop:"swVersion",label:"S/W Version",align:"center"}),t(u,{prop:"regDt",label:"\uB4F1\uB85D\uC77C",align:"center"}),t(u,{prop:"regUser",label:"\uB4F1\uB85D\uC790",align:"center"}),t(u,{prop:"lastAccessDate",label:"\uC131\uACF5\uC5EC\uBD80",align:"center"})]),_:1},8,["data","onRowClick"])]),c("div",ue,[t(V,{onCurrentChange:a.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":a.pageVal.total},null,8,["onCurrentChange","page-count"])]),t(D,{modelValue:a.swDetail.modal,"onUpdate:modelValue":i[2]||(i[2]=l=>a.swDetail.modal=l)},null,8,["modelValue"])],64)}var be=Y(Z,[["render",ce]]);export{be as default};
