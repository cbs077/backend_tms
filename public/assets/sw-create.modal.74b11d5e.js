import{d as O,j as P,l as G,m as _,e as d,o as C,b as B,w as S,a as o,f as p,c as A,k as R,F as V,t as k,A as h}from"./vendor.9d37dd73.js";import{l as I}from"./lodash.c8ee468d.js";import{B as U,_ as M,u as b}from"./index.d29c9db7.js";import{B as L}from"./base-modal.2684ffef.js";const T=O({components:{BaseModal:L,BaseButton:U},props:{name:{type:String},code:{type:String},description:{type:String},registrationDate:{type:String},registrationUser:{type:String},modelValue:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue","click:positive","click:negative"],setup(u,{emit:n}){const m=P({get:()=>u.modelValue,set:s=>{n("update:modelValue",s)}}),{deviceModels:f,swVersions:F,swGroupCodes:E}=b();function c(s){var t=new Date(s),l=""+(t.getMonth()+1),r=""+t.getDate(),i=t.getFullYear();return l.length<2&&(l="0"+l),r.length<2&&(r="0"+r),[i,l,r].join("-")}let e=G({SW_GROUP_ID:"",SW_GROUP_NM:"",SW_VERSION:"",APPL_DT:"",DATA_SIZE:"",FILE_PATH:"",FILE_NM:"",UPLOAD_FILE_NM:"",REG_DT:c(new Date),REG_USER:window.localStorage.getItem("userNm"),deviceModels:[],swfile:[],isExistId:""});function D(){var s=window.localStorage.getItem("token"),t=window.localStorage.getItem("vanId"),l="van_id="+t;s==null&&(s=""),_.get("http://tms-test-server.p-e.kr:8081/swgroup/list?"+l,{headers:{Authorization:s}}).then(r=>{var i=r.data.list;e.deviceModels=I.exports.map(i,function(w){return{key:w.SW_GROUP_NM,value:w.SW_GROUP_ID}})})}function g(s){var t=I.exports.find(e.deviceModels,function(l){return l.value==s});e.SW_GROUP_ID=t.value,e.SW_GROUP_NM=t.key}function v(s){var t=I.exports.find(e.deviceModels,function(l){return l.value==s});e.SW_GROUP_ID=t.value,e.SW_GROUP_NM=t.key}function a(s){var t=s.target.files[0];e.swfile=t,e.DATA_SIZE=t.size,e.FILE_PATH=t.name,e.FILE_NM=t.name,e.UPLOAD_FILE_NM=t.name}async function N(){if(e.FILE_PATH==""){alert("\uD30C\uC77C\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}if(e.isExistId=="true"||e.isExistId==""){alert("\uBC84\uC804 \uC911\uBCF5\uAC12\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");return}const s=new FormData;s.append("swfile",e.swfile);try{const{data:t}=await _.post("http://tms-test-server.p-e.kr:8081/upload",s,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{console.log("response.data",l.data.messages.filepath),y(l.data.messages.filepath)});console.log(t)}catch(t){console.log(t)}}async function y(s){var t=window.localStorage.getItem("token"),l=window.localStorage.getItem("vanId"),r=window.localStorage.getItem("userNm");await _.post("http://tms-test-server.p-e.kr:8081/swoprmg/?",{VAN_ID:l,SW_GROUP_ID:e.SW_GROUP_ID,SW_VERSION:e.SW_VERSION.padStart(10,"0"),APPL_DT:e.APPL_DT,DATA_SIZE:e.DATA_SIZE,FILE_PATH:s,FILE_NM:e.FILE_NM,UPLOAD_FILE_NM:e.UPLOAD_FILE_NM,REG_DT:new Date,REG_USER:r},{headers:{Authorization:t}}).then(i=>{i.data.list,n("click:positive")})}const W=s=>{var t=window.localStorage.getItem("token"),l=window.localStorage.getItem("vanId");if(window.localStorage.getItem("userNm"),e.SW_GROUP_ID==""){alert("\uADF8\uB8F9 \uC544\uC774\uB514 is null");return}if(e.SW_VERSION==""){alert("\uBC84\uC804 is null");return}_.get("http://tms-test-server.p-e.kr:8081/swoprmg/idcheck/"+l+"/"+e.SW_GROUP_ID+"/"+e.SW_VERSION.padStart(10,"0"),{headers:{Authorization:t}}).then(r=>{var i=r.data.count;i>0?(alert("\uC774\uBBF8 \uB4F1\uB85D\uB41C \uBC84\uC804 \uC785\uB2C8\uB2E4."),e.isExistId="true"):(alert("\uB4F1\uB85D\uAC00\uB2A5\uD55C \uBC84\uC804 \uC785\uB2C8\uB2E4."),e.isExistId="false")})};return D(),{deviceModels:f,swVersions:F,swGroupCodes:E,isOpen:m,closeModal(){m.value=!1},changeForm:e,onSave:y,onSelectGroupId:g,onSelectGroupNm:v,selectFile:a,uploadFile:N,onIdCheck:W}}}),x={class:"my-3 grid h-10 grid-cols-8"},z=o("div",{class:"col-span-2 my-auto text-center font-bold"}," S/W Group \uC544\uC774\uB514 ",-1),H={class:"col-span-4 my-auto"},Z={class:"my-3 grid h-10 grid-cols-8"},$=o("div",{class:"col-span-2 my-auto text-center font-bold"}," S/W Group \uBA85 ",-1),j={class:"col-span-4 my-auto"},q={class:"my-3 grid h-10 grid-cols-8"},Y=o("div",{class:"col-span-2 my-auto text-center font-bold"}," S/W Version ",-1),J={class:"col-span-4 my-auto"},K={class:"col-span-2 my-auto text-center font-bold"},Q={class:"my-3 grid grid-cols-8"},X=o("div",{class:"col-span-2 my-auto text-center font-bold"}," S/W \uD30C\uC77C \uC5C5\uB85C\uB4DC ",-1),ee={class:"col-span-4 my-auto"},te={class:"my-3 grid h-10 grid-cols-8"},oe=o("div",{class:"col-span-2 my-auto text-center font-bold"}," \uB4F1\uB85D\uC77C ",-1),ue={class:"col-span-6 my-auto"},ae={class:"my-3 grid h-10 grid-cols-8"},se=o("div",{class:"col-span-2 my-auto text-center font-bold"}," \uB4F1\uB85D\uC790 ",-1),le={class:"col-span-6 my-auto"},ne=o("div",{class:"mx-3 border border-sk-lightgray p-3"},[h(" * S/W Version\uC740 \uCD5C\uB300 10\uC790\uB9AC\uC758 \uC22B\uC790\uB85C \uC785\uB825\uD574 \uC8FC\uC2ED\uC2DC\uC624.(\uBB38\uC790\uB97C \uC785\uB825\uD558\uC2E4 \uACBD\uC6B0 10\uC790\uB9AC\uB97C \uCC44\uC6CC \uC8FC\uC2ED\uC2DC\uC624.)"),o("br"),h(" * S/W Version \uC785\uB825 \uC2DC \uC55E\uC11C \uB4F1\uB85D\uD55C Version \uC774\uD6C4 Version\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC154\uC57C \uD569\uB2C8\uB2E4."),o("br"),h(" * S/W \uB4F1\uB85D \uC2DC \uB4F1\uB85D \uD30C\uC77C\uC758 \uD655\uC7A5\uC790\uAC00 exe\uC640 \uAC19\uC740 \uC2E4\uD589\uD30C\uC77C\uC740 \uC5C5\uB85C\uB4DC \uBD88\uAC00\uD558\uBA70 \uCD5C\uB300 Upload \uD30C\uC77C \uD06C\uAE30\uB294 1M\uC785\uB2C8\uB2E4. ")],-1);function re(u,n,m,f,F,E){const c=d("el-option"),e=d("el-select"),D=d("el-input"),g=d("base-button"),v=d("base-modal");return C(),B(v,{modelValue:u.isOpen,"onUpdate:modelValue":n[4]||(n[4]=a=>u.isOpen=a),class:"w-2/3",title:"S/W \uB4F1\uB85D","positive-text":"\uC800\uC7A5","negative-text":"\uCD08\uAE30\uD654","onClick:positive":u.uploadFile},{modalBody:S(()=>[o("div",null,[o("div",x,[z,o("div",H,[p(e,{clearable:"",placeholder:"\uC120\uD0DD",modelValue:u.changeForm.SW_GROUP_ID,"onUpdate:modelValue":n[0]||(n[0]=a=>u.changeForm.SW_GROUP_ID=a),onChange:u.onSelectGroupId,size:"large",class:"w-full"},{default:S(()=>[(C(!0),A(V,null,R(u.changeForm.deviceModels,a=>(C(),B(c,{key:a.value,label:a.value,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",Z,[$,o("div",j,[p(e,{clearable:"",placeholder:"\uC120\uD0DD",modelValue:u.changeForm.SW_GROUP_NM,"onUpdate:modelValue":n[1]||(n[1]=a=>u.changeForm.SW_GROUP_NM=a),onChange:u.onSelectGroupNm,size:"large",class:"w-full"},{default:S(()=>[(C(!0),A(V,null,R(u.changeForm.deviceModels,a=>(C(),B(c,{key:a.value,label:a.key,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",q,[Y,o("div",J,[p(D,{modelValue:u.changeForm.SW_VERSION,"onUpdate:modelValue":n[2]||(n[2]=a=>u.changeForm.SW_VERSION=a),size:"large"},null,8,["modelValue"])]),o("div",K,[p(g,{onClick:u.onIdCheck,text:"\uC911\uBCF5\uD655\uC778",class:"mr-1"},null,8,["onClick"])])]),o("div",Q,[X,o("div",ee,[o("input",{onChange:n[3]||(n[3]=(...a)=>u.selectFile&&u.selectFile(...a)),size:"large",type:"file"},null,32)])]),o("div",te,[oe,o("div",ue,k(u.changeForm.REG_DT),1)]),o("div",ae,[se,o("div",le,k(u.changeForm.REG_USER),1)])]),ne]),_:1},8,["modelValue","onClick:positive"])}var pe=M(T,[["render",re]]);export{pe as S};
