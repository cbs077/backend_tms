import{d as N,l as y,K as U,e as s,o as A,c as T,f as o,a as n,w as V,F as M,k as q,b as z,m as I}from"./vendor.9d37dd73.js";import{l as L}from"./lodash.c8ee468d.js";import{u as E,w as Y}from"./xlsx.4af27ae8.js";import{_ as $,a as j}from"./index.d29c9db7.js";import{T as O}from"./table-common-button.f5560c2d.js";import{u as R}from"./devices.hooks.91a6deab.js";import{a as x}from"./filter.030cb9fd.js";const K=N({name:"DeviceRegistrationLogs",components:{BreadCrumb:j,TableCommonButton:O},setup(){let{renmeObjectKey:t}=R();const a=y({start:new Date,end:new Date}),m=U("");let i=y({page:1,pageCount:10,total:10}),p=y({deviceModels:[{value:"-"}],data:[]}),h="";function _(){var e="page="+i.page+"&page_count="+i.pageCount;return e=e+"&search_start_dt="+x(a.start)+"&search_end_dt="+x(a.end),m.value!=""&&(e=e+"&cat_model_id="+m.value),v(e).then(r=>{b(r)}),e}const g=e=>{i.page=e,_()},f=e=>{i.pageCount=e,_()},k=e=>{_()},B=e=>{console.log("reset"),a.start=new Date,a.end=new Date,m.value=""},D=e=>{i.total=e};function b(e){var r=e.list,u=[];for(var d of r){var C=t(d);u.push(C)}D(e.total_count),p.data=u}function c(){var e=window.localStorage.getItem("token"),r=window.localStorage.getItem("vanId"),u="van_id="+r;e==null&&(e=""),I.get("http://tms-test-server.p-e.kr:8081/terminal_mdl?"+u,{headers:{Authorization:e}}).then(d=>{var C=d.data.list;p.deviceModels=L.exports.map(C,function(S){return{key:S.CAT_MODEL_ID,value:S.CAT_MODEL_NM}}),p.deviceModels.unshift({key:"",value:"\uC804\uCCB4"})})}async function v(d){var r=window.localStorage.getItem("token"),u=window.localStorage.getItem("vanId"),d=d+"&van_id="+u;return r==null&&(r=""),await I.get("http://tms-test-server.p-e.kr:8081/reghist/list?"+d,{headers:{Authorization:r}}).then(F=>F.data)}const w=()=>{v("page=1&page_count=1000"+h).then(e=>{var r=E.json_to_sheet(e.list),u=E.book_new();E.book_append_sheet(u,r,"nameData"),Y(u,"terminalmdl.xlsx")})};function l(e){modelCreate.modal=!1,modelCreate.data={}}return c(),v("page=1&page_count=20").then(e=>{b(e)}),{condition:a,query:m,pageVal:i,changeForm:p,onSearch:k,onReset:B,excelValue:h,onSaveExcel:w,paginate:g,onTake:f,onSave:l}}}),W={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},G={class:"my-3 flex"},H=n("div",{class:"my-auto mr-6 w-1/12"},"\uC5C5\uB370\uC774\uD2B8\uC77C",-1),J={class:"flex w-5/12"},P={class:"block"},Q=n("p",{class:"mx-2 translate-y-1 transition"},"~",-1),X={class:"block"},Z=n("div",{class:"w-1-12 my-auto mr-6"},"\uBAA8\uB378\uBA85",-1),ee={class:"my-auto w-5/12 pr-5"},te=n("div",{class:"grow"},null,-1),oe={class:"rounded border border-sk-gray"},ae={class:"flex justify-center"};function ne(t,a,m,i,p,h){const _=s("bread-crumb"),g=s("el-date-picker"),f=s("el-option"),k=s("el-select"),B=s("options-search-button"),D=s("excel-button"),b=s("table-common-button"),c=s("el-table-column"),v=s("el-table"),w=s("el-pagination");return A(),T(M,null,[o(_,{text:"\uB2E8\uB9D0\uAE30 \uB4F1\uB85D \uC774\uB825"}),n("div",W,[n("div",G,[H,n("div",J,[n("div",P,[o(g,{modelValue:t.condition.start,"onUpdate:modelValue":a[0]||(a[0]=l=>t.condition.start=l),size:"large"},null,8,["modelValue"])]),Q,n("div",X,[o(g,{modelValue:t.condition.end,"onUpdate:modelValue":a[1]||(a[1]=l=>t.condition.end=l),size:"large"},null,8,["modelValue"])])]),Z,n("div",ee,[o(k,{modelValue:t.query,"onUpdate:modelValue":a[2]||(a[2]=l=>t.query=l),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:V(()=>[(A(!0),T(M,null,q(t.changeForm.deviceModels,l=>(A(),z(f,{key:l.value,label:l.value,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),o(B,{"onClick:search":t.onSearch,"onClick:reset":t.onReset},null,8,["onClick:search","onClick:reset"])]),o(b,{"onUpdate:take":t.onTake},{body:V(()=>[te,o(D,{"onClick:excel":t.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"])]),_:1},8,["onUpdate:take"]),n("div",oe,[o(v,{data:t.changeForm.data,fit:"",class:"rounded"},{default:V(()=>[o(c,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),o(c,{prop:"modelName",label:"\uB2E8\uB9D0\uAE30 \uBAA8\uB378\uBA85",align:"center"}),o(c,{prop:"deviceNumberFrom",label:"\uB2E8\uB9D0\uAE30 \uBC88\uD638 (From)",align:"center"}),o(c,{prop:"deviceNumberTo",label:"\uB2E8\uB9D0\uAE30 \uBC88\uD638 (To)",align:"center"}),o(c,{prop:"regDt",label:"\uB4F1\uB85D\uC77C",align:"center"}),o(c,{prop:"regUser",label:"\uB4F1\uB85D\uC790",align:"center"})]),_:1},8,["data"])]),n("div",ae,[o(w,{onCurrentChange:t.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":t.pageVal.total},null,8,["onCurrentChange","page-count"])])],64)}var me=$(K,[["render",ne]]);export{me as default};
