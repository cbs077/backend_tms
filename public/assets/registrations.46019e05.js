import{d as q,I as j,J as x,K as M,l as f,L,e as s,o as F,c as R,f as t,a as c,w as A,F as z,k as K,b as H,m as E}from"./vendor.9d37dd73.js";import{l as J}from"./lodash.c8ee468d.js";import{u as I,w as P}from"./xlsx.4af27ae8.js";import{_ as Q,B as X,u as Y}from"./index.d29c9db7.js";import{T as Z}from"./table-common-button.f5560c2d.js";import{S as ee}from"./sw-create.modal.74b11d5e.js";import{S as oe}from"./sw-detail.modal.6b91d96f.js";import{u as ae}from"./devices.hooks.91a6deab.js";import"./base-modal.2684ffef.js";import"./filter.030cb9fd.js";const te=q({name:"DeviceRegistrations",components:{TableCommonButton:Z,ElTableColumn:j,ElTable:x,BaseButton:X,SwDetailModal:oe,SwCreateModal:ee},setup(){const{registrationHeaders:o,devices:r,update:T,renmeObjectKey:h}=ae(),{SWsearchOptions:O}=Y(),g=M(),C=f({modal:!1}),_=f({modal:!1}),k=a=>{C.data=a,C.modal=!0},S=a=>{u.page=a;var e="page="+u.page+"&page_count="+u.pageCount;e=e+"&"+g.value+"="+d.value,m(e).then(l=>{p(l)})},D=a=>{u.pageCount=a;var e="page="+u.page+"&page_count="+u.pageCount;e=e+"&"+g.value+"="+d.value,m(e).then(l=>{p(l)})},d=M("");let u=f({page:1,pageCount:10,total:10}),b=f({swGroupCodes:[{value:"-"}],deviceModels:[{value:"-"}],swVersions:[{value:"-"}],data:[]}),i="";const B=a=>{console.log();var e="page="+u.page+"&page_count="+u.pageCount;e=e+"&"+g.value+"="+d.value,i=e,m(e).then(l=>{p(l)})},V=a=>{console.log("reset"),g.value="",d.value=""},y=a=>{u.total=a};function p(a){var e=a.list,l=[];for(var v of e){var w=h(v);l.push(w)}y(a.total_count),b.data=l}function n(){var a=window.localStorage.getItem("token"),e=window.localStorage.getItem("vanId"),l="van_id="+e;a==null&&(a=""),E.get("http://tms-test-server.p-e.kr:8081/terminal_mdl?"+l,{headers:{Authorization:a}}).then(v=>{var w=v.data.list;b.deviceModels=J.exports.map(w,function($){return{value:$.CAT_MODEL_NM}})})}async function m(v){var e=window.localStorage.getItem("token"),l=window.localStorage.getItem("vanId"),v=v+"&van_id="+l;return e==null&&(e=""),await E.get("http://tms-test-server.p-e.kr:8081/swoprmg/list?"+v,{headers:{Authorization:e}}).then(W=>W.data)}const N=a=>{console.log("onSaveDetail"),C.modal=!1,n(),m("page=1&page_count=20").then(e=>{p(e)})},U=()=>{m("page=1&page_count=1000"+i).then(a=>{var e=I.json_to_sheet(a.list),l=I.book_new();I.book_append_sheet(l,e,"nameData"),P(l,"swOperation.xlsx")})};function G(){_.modal=!1,_.data={},n(),m("page=1&page_count=20").then(a=>{p(a)})}return n(),m("page=1&page_count=20").then(a=>{p(a)}),{selectOption:g,onRowClicked:k,swCreate:_,swDetail:C,headers:o,devices:r,SWsearchOptions:O,Search:L,query:d,pageVal:u,changeForm:b,onSearch:B,excelValue:i,onSaveExcel:U,onSave:G,paginate:S,onTake:D,update:T,renmeObjectKey:h,onReset:V,onSaveDetail:N}}}),ne={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},le={class:"my-3 flex flex-row"},se=c("div",{class:"my-auto mr-6 w-1/12"},"\uAC80\uC0C9\uC870\uAC74",-1),re={class:"my-auto w-5/12 pr-5"},ue=c("div",{class:"my-auto mr-6 w-1/12 text-center"},"\uAC80\uC0C9\uC5B4",-1),ie={class:"w-5/12 pr-5"},ce=c("div",{class:"grow"},null,-1),pe={class:"rounded border border-sk-gray"},de={class:"flex justify-center"};function me(o,r,T,h,O,g){const C=s("bread-crumb"),_=s("el-option"),k=s("el-select"),S=s("el-input"),D=s("options-search-button"),d=s("excel-button"),u=s("base-button"),b=s("table-common-button"),i=s("el-table-column"),B=s("el-table"),V=s("el-pagination"),y=s("sw-detail-modal"),p=s("sw-create-modal");return F(),R(z,null,[t(C,{text:"S/W \uC870\uD68C \uBC0F \uB4F1\uB85D"}),c("div",ne,[c("div",le,[se,c("div",re,[t(k,{modelValue:o.selectOption,"onUpdate:modelValue":r[0]||(r[0]=n=>o.selectOption=n),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:A(()=>[(F(!0),R(z,null,K(o.SWsearchOptions,n=>(F(),H(_,{key:n.value,label:n.value,value:n.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),ue,c("div",ie,[t(S,{size:"large",modelValue:o.query,"onUpdate:modelValue":r[1]||(r[1]=n=>o.query=n),placeholder:"Please Input","suffix-icon":o.Search},null,8,["modelValue","suffix-icon"])])]),t(D,{"onClick:search":o.onSearch,"onClick:reset":o.onReset},null,8,["onClick:search","onClick:reset"])]),t(b,null,{body:A(()=>[ce,t(d,{"onClick:excel":o.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"]),t(u,{text:"S/W \uB4F1\uB85D",class:"ml-1",onClick:r[2]||(r[2]=n=>o.swCreate.modal=!0)})]),_:1}),c("div",pe,[t(B,{data:o.changeForm.data,fit:"",class:"rounded",onRowClick:o.onRowClicked},{default:A(()=>[t(i,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),t(i,{prop:"swGroupCode",label:"S/W Group \uCF54\uB4DC",align:"center"}),t(i,{prop:"swGroupNm",label:"S/W Group \uBA85",align:"center"}),t(i,{prop:"swVersion",label:"S/W Version",align:"center"}),t(i,{prop:"swFileNm",label:"Upload \uD30C\uC77C\uBA85",align:"center"}),t(i,{prop:"swFileSize",label:"\uD30C\uC77C Size (byte)",align:"center"}),t(i,{prop:"regDt",label:"\uB4F1\uB85D\uC77C",align:"center"}),t(i,{prop:"regUser",label:"\uB4F1\uB85D\uC790",align:"center"})]),_:1},8,["data","onRowClick"])]),c("div",de,[t(V,{onCurrentChange:o.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":o.pageVal.total},null,8,["onCurrentChange","page-count"])]),t(y,{modelValue:o.swDetail.modal,"onUpdate:modelValue":r[3]||(r[3]=n=>o.swDetail.modal=n),device:o.swDetail.data,"onClick:positive":o.onSaveDetail},null,8,["modelValue","device","onClick:positive"]),t(p,{"onClick:positive":o.onSave,modelValue:o.swCreate.modal,"onUpdate:modelValue":r[4]||(r[4]=n=>o.swCreate.modal=n)},null,8,["onClick:positive","modelValue"])],64)}var De=Q(te,[["render",me]]);export{De as default};
