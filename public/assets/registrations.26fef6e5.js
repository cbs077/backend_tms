var Q=Object.defineProperty;var W=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var N=(e,o,i)=>o in e?Q(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,P=(e,o)=>{for(var i in o||(o={}))X.call(o,i)&&N(e,i,o[i]);if(W)for(var i of W(o))Z.call(o,i)&&N(e,i,o[i]);return e};import{d as x,V as ee,j as oe,l as S,m as U,e as d,o as I,b as z,w as R,a as t,f as s,t as $,I as te,J as ae,K as T,L as ne,c as M,F as j,k as se}from"./vendor.9d37dd73.js";import{u as O,w as le}from"./xlsx.4af27ae8.js";import{B as q,_ as K,u as ue}from"./index.d29c9db7.js";import{T as re}from"./table-common-button.f5560c2d.js";import{R as ie}from"./result.modal.12bea6ab.js";import{B as de}from"./base-modal.2684ffef.js";import{S as ce}from"./select-box.f66e98c2.js";import{S as pe}from"./sw-group-detail.modal.cad07d0c.js";import{u as me}from"./devices.hooks.91a6deab.js";import"./filter.030cb9fd.js";const ge=x({components:{BaseModal:de,BaseButton:q,SelectBox:ce},props:{name:{type:String},code:{type:String},description:{type:String},registrationDate:{type:String},registrationUser:{type:String},modelValue:{type:Boolean,required:!1,default:!0}},emits:["update:modelValue","click:positive","click:negative"],setup(e,{emit:o}){ee(()=>{console.log("mounted in the composition api!"),a.SW_GROUP_ID=""});const i=oe({get:()=>e.modelValue,set:p=>{Object.assign(a,g),o("update:modelValue",p)}}),{deviceModels:B,swVersions:D,swGroupCodes:f}=ue();function h(p){var v=new Date(p),_=""+(v.getMonth()+1),u=""+v.getDate(),r=v.getFullYear();return _.length<2&&(_="0"+_),u.length<2&&(u="0"+u),[r,_,u].join("-")}let g=S({SW_GROUP_ID:"",SW_GROUP_NM:"",DESCRIPTION:"",REG_DT:h(new Date),REG_USER:window.localStorage.getItem("userNm"),isExistId:""});const a=S(P({},g));return{deviceModels:B,swVersions:D,swGroupCodes:f,isOpen:i,closeModal(){i.value=!1},changeForm:a,onSave:p=>{var v=window.localStorage.getItem("token"),_=window.localStorage.getItem("vanId"),u=window.localStorage.getItem("userNm");if(a.isExistId=="true"||a.isExistId==""){alert("Group \uCF54\uB4DC \uC911\uBCF5\uAC12\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.");return}U.post("http://tms-test-server.p-e.kr:8081/swgroup/?",{VAN_ID:_,SW_GROUP_ID:a.SW_GROUP_ID,SW_GROUP_NM:a.SW_GROUP_NM,DESCRIPTION:a.DESCRIPTION,REG_DT:new Date,REG_USER:u},{headers:{Authorization:v}}).then(r=>{r.data.list,o("click:positive")})},onIdCheck:p=>{var v=window.localStorage.getItem("token"),_=window.localStorage.getItem("vanId");if(window.localStorage.getItem("userNm"),console.log("changeForm.SW_GROUP_ID.length",a.SW_GROUP_ID.length),a.SW_GROUP_ID==""){alert("\uADF8\uB8F9\uCF54\uB4DC is null");return}if(a.SW_GROUP_ID.length>4){alert("4\uC790\uB9AC \uC774\uC0C1\uC785\uB2C8\uB2E4.");return}U.get("http://tms-test-server.p-e.kr:8081/swgroup/idcheck/"+_+"/"+a.SW_GROUP_ID,{headers:{Authorization:v}}).then(u=>{var r=u.data.count;r>0?(alert("\uC774\uBBF8 \uB4F1\uB85D\uB41C \uBAA8\uB378 \uCF54\uB4DC \uC785\uB2C8\uB2E4."),a.isExistId="true"):(alert("\uB4F1\uB85D\uAC00\uB2A5\uD55C \uBAA8\uB378 \uCF54\uB4DC \uC785\uB2C8\uB2E4."),a.isExistId="false")})}}}}),Ce={class:"my-3 grid h-10 grid-cols-8"},_e=t("div",{class:"col-span-2 my-auto text-center font-bold"}," S/W Group \uCF54\uB4DC ",-1),ve={class:"col-span-4 my-auto"},he={class:"col-span-2 my-auto text-center font-bold"},Se={class:"my-3 grid h-10 grid-cols-8"},Be=t("div",{class:"col-span-2 my-auto text-center font-bold"}," S/W Group \uBA85 ",-1),we={class:"col-span-4 my-auto"},be={class:"my-3 grid grid-cols-8"},De=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uC124\uBA85 ",-1),fe={class:"col-span-6 my-auto"},ke={class:"my-3 grid h-10 grid-cols-8"},ye=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uB4F1\uB85D\uC77C ",-1),Ge={class:"col-span-6 my-auto"},Fe={class:"my-3 grid h-10 grid-cols-8"},Ie=t("div",{class:"col-span-2 my-auto text-center font-bold"}," \uB4F1\uB85D\uC790 ",-1),Re={class:"col-span-6 my-auto"},Ve={class:"mt-12 text-center"};function Ae(e,o,i,B,D,f){const h=d("el-input"),g=d("base-button"),a=d("base-modal");return I(),z(a,{modelValue:e.isOpen,"onUpdate:modelValue":o[3]||(o[3]=C=>e.isOpen=C),"onClick:exitPositive":e.onExit,class:"w-2/3",title:"S/W Group \uB4F1\uB85D","no-action":""},{modalBody:R(()=>[t("div",null,[t("div",Ce,[_e,t("div",ve,[s(h,{modelValue:e.changeForm.SW_GROUP_ID,"onUpdate:modelValue":o[0]||(o[0]=C=>e.changeForm.SW_GROUP_ID=C),maxlength:"4",size:"large"},null,8,["modelValue"])]),t("div",he,[s(g,{onClick:e.onIdCheck,text:"\uC911\uBCF5\uD655\uC778",class:"mr-1"},null,8,["onClick"])])]),t("div",Se,[Be,t("div",we,[s(h,{modelValue:e.changeForm.SW_GROUP_NM,"onUpdate:modelValue":o[1]||(o[1]=C=>e.changeForm.SW_GROUP_NM=C),size:"large"},null,8,["modelValue"])])]),t("div",be,[De,t("div",fe,[s(h,{modelValue:e.changeForm.DESCRIPTION,"onUpdate:modelValue":o[2]||(o[2]=C=>e.changeForm.DESCRIPTION=C),rows:"5",type:"textarea"},null,8,["modelValue"])])]),t("div",ke,[ye,t("div",Ge,$(e.changeForm.REG_DT),1)]),t("div",Fe,[Ie,t("div",Re,$(e.changeForm.REG_USER),1)])]),t("div",Ve,[s(g,{class:"mr-4 border-sk-gray bg-sk-gray text-white",text:"\uC218\uC815 \uBC0F \uC800\uC7A5",type:"button",onClick:e.onSave},null,8,["onClick"])])]),_:1},8,["modelValue","onClick:exitPositive"])}var Oe=K(ge,[["render",Ae]]);const Ue=x({name:"DeviceRegistrations",components:{TableCommonButton:re,ResultModal:ie,ElTableColumn:te,ElTable:ae,BaseButton:q,SwGroupDetailModal:pe,SwGroupCreateModal:Oe},setup(){const{registrationHeaders:e,devices:o,update:i,renmeObjectKey:B}=me(),D=[{id:1,key:"sw_group_id",value:"S/W Group \uCF54\uB4DC"},{id:2,key:"sw_group_nm",value:"S/W Group \uBA85"}],f=S({modal:!1}),h=S({modal:!1,items:[{deviceNumber:"1111",status:"\uC131\uACF5"},{deviceNumber:"1111",status:"\uC131\uACF5"},{deviceNumber:"1111",status:"\uC131\uACF5"},{deviceNumber:"1111",status:"\uC131\uACF5"},{deviceNumber:"1111",status:"\uC131\uACF5"}]}),g=S({modal:!1,data:{}}),a=S({modal:!1,data:{}}),C=()=>{f.modal=!1,setTimeout(()=>{h.modal=!0},1e3)},G=l=>{console.log("row",l),g.data=l,g.modal=!0},p=T(),v=l=>{r.page=l;var n="page="+r.page+"&page_count="+r.pageCount;n=n+"&"+p.value+"="+u.value,w(n).then(m=>{b(m)})},_=l=>{r.pageCount=l;var n="page="+r.page+"&page_count="+r.pageCount;n=n+"&"+p.value+"="+u.value,w(n).then(m=>{b(m)})},u=T("");let r=S({page:1,pageCount:10,total:10}),F=S({swGroupCodes:[{value:"-"}],deviceModels:[{value:"-"}],swVersions:[{value:"-"}],data:[]}),k="";const V=l=>{console.log();var n="page="+r.page+"&page_count="+r.pageCount;n=n+"&"+p.value+"="+u.value,k=n,w(n).then(m=>{b(m)})},A=l=>{console.log("reset"),p.value="",u.value=""},c=l=>{r.total=l};function b(l){var n=l.list,m=[];for(var y of n){var E=B(y);m.push(E)}c(l.total_count),F.data=m}async function w(y){var n=window.localStorage.getItem("token"),m=window.localStorage.getItem("vanId"),y=y+"&van_id="+m;return n==null&&(n=""),await U.get("http://tms-test-server.p-e.kr:8081/swgroup/list?"+y,{headers:{Authorization:n}}).then(Y=>Y.data)}const H=()=>{w("page=1&page_count=1000"+k).then(l=>{console.log("renmeObjectKey",B(l.list));var n=O.json_to_sheet(l.list,{origin:"A2",skipHeader:!0}),m=O.book_new();O.book_append_sheet(m,n,"nameData"),le(m,"swGroup.xlsx")})};function L(){a.modal=!1,a.data={},w("page=1&page_count=20").then(l=>{b(l)})}const J=l=>{g.modal=!1,w("page=1&page_count=20").then(n=>{b(n)})};return w("page=1&page_count=20").then(l=>{b(l)}),{selectOption:p,onRowClicked:G,onRegistration:C,swGroupCreate:a,swGroupDetail:g,headers:e,devices:o,SGsearchOptions:D,registrationResult:h,Search:ne,query:u,pageVal:r,changeForm:F,onSearch:V,onReset:A,excelValue:k,onSaveExcel:H,paginate:v,onTake:_,update:i,renmeObjectKey:B,onSave:L,onSaveDetail:J}}}),Ee={class:"mb-4 rounded border border-sk-gray bg-option-background p-3 pl-8"},We={class:"my-3 flex flex-row"},Ne=t("div",{class:"my-auto mr-6 w-1/12"},"\uAC80\uC0C9\uC870\uAC74",-1),Pe={class:"my-auto w-5/12 pr-5"},$e=t("div",{class:"my-auto mr-6 w-1/12 text-center"},"\uAC80\uC0C9\uC5B4",-1),Te={class:"w-5/12 pr-5"},Me=t("div",{class:"grow"},null,-1),je={class:"rounded border border-sk-gray"},xe={class:"flex justify-center"};function ze(e,o,i,B,D,f){const h=d("bread-crumb"),g=d("el-option"),a=d("el-select"),C=d("el-input"),G=d("options-search-button"),p=d("excel-button"),v=d("base-button"),_=d("table-common-button"),u=d("el-table-column"),r=d("el-table"),F=d("el-pagination"),k=d("result-modal"),V=d("sw-group-detail-modal"),A=d("sw-group-create-modal");return I(),M(j,null,[s(h,{text:"S/W Group \uC870\uD68C \uBC0F \uB4F1\uB85D"}),t("div",Ee,[t("div",We,[Ne,t("div",Pe,[s(a,{modelValue:e.selectOption,"onUpdate:modelValue":o[0]||(o[0]=c=>e.selectOption=c),clearable:"",placeholder:"\uC120\uD0DD",size:"large",class:"w-full"},{default:R(()=>[(I(!0),M(j,null,se(e.SGsearchOptions,c=>(I(),z(g,{key:c.value,label:c.value,value:c.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),$e,t("div",Te,[s(C,{size:"large",modelValue:e.query,"onUpdate:modelValue":o[1]||(o[1]=c=>e.query=c),placeholder:"Please Input","suffix-icon":e.Search},null,8,["modelValue","suffix-icon"])])]),s(G,{"onClick:search":e.onSearch,"onClick:reset":e.onReset},null,8,["onClick:search","onClick:reset"])]),s(_,{"onUpdate:take":e.onTake},{body:R(()=>[Me,s(p,{"onClick:excel":e.onSaveExcel,class:"mr-1"},null,8,["onClick:excel"]),s(v,{text:"S/W Group \uB4F1\uB85D",class:"ml-1 w-36",onClick:o[2]||(o[2]=c=>e.swGroupCreate.modal=!0)})]),_:1},8,["onUpdate:take"]),t("div",je,[s(r,{data:e.changeForm.data,fit:"",class:"rounded",onRowClick:e.onRowClicked},{default:R(()=>[s(u,{prop:"van",label:"VAN\uC0AC\uBA85",align:"center"}),s(u,{prop:"swGroupCode",label:"S/W Group \uCF54\uB4DC",align:"center"}),s(u,{prop:"swGroupNm",label:"S/W Group \uBA85",align:"center"}),s(u,{prop:"regDt",label:"\uB4F1\uB85D\uC77C",align:"center"}),s(u,{prop:"regUser",label:"\uB4F1\uB85D\uC790",align:"center"})]),_:1},8,["data","onRowClick"])]),t("div",xe,[s(F,{onCurrentChange:e.paginate,background:"",class:"my-6",layout:"prev, pager, next","page-count":e.pageVal.total},null,8,["onCurrentChange","page-count"])]),s(k,{modelValue:e.registrationResult.modal,"onUpdate:modelValue":o[3]||(o[3]=c=>e.registrationResult.modal=c),title:"\uB2E8\uB9D0\uAE30 \uC77C\uAD04\uB4F1\uB85D \uCC98\uB9AC \uACB0\uACFC",items:e.registrationResult.items},null,8,["modelValue","items"]),s(V,{modelValue:e.swGroupDetail.modal,"onUpdate:modelValue":o[4]||(o[4]=c=>e.swGroupDetail.modal=c),device:e.swGroupDetail.data,"onClick:positive":e.onSaveDetail},null,8,["modelValue","device","onClick:positive"]),s(A,{"onClick:positive":e.onSave,modelValue:e.swGroupCreate.modal,"onUpdate:modelValue":o[5]||(o[5]=c=>e.swGroupCreate.modal=c)},null,8,["onClick:positive","modelValue"])],64)}var to=K(Ue,[["render",ze]]);export{to as default};
